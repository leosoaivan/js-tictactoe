"use strict";const gameBoard=(()=>{let e=Array(9).fill("");return{contents:e,isEmptyAtIndex:a=>!Boolean(e[a]),reset:()=>{for(let a=0;a<e.length;a++)e[a]=""}}})(),displayController=(()=>{const e=e=>{e.children[1].innerHTML=""},a=e=>{e.children[1].classList.remove("winner"),e.classList.remove("is-flipped")};return{colorSquares:e=>{for(let a of e)document.querySelector(`[data-board-index="${a}"]`).children[1].classList.add("winner")},clearSquares:()=>{let r=document.querySelectorAll(".square");for(let t of r)e(t),a(t)}}})(),playerFactory=(e,a,r)=>(name=prompt(`You are Player ${e}. What is your name?`,`Player ${e}`),{symbol:a,name:name,imgsrc:r}),gameFactory=(()=>{const e=[...document.querySelectorAll(".square")];let a=playerFactory(1,"X","images/Letter-X.png"),r=playerFactory(2,"O","images/Letter-O.png"),t=0,o=!1;const n=e=>{let a=e.getAttribute("data-board-index");gameBoard.isEmptyAtIndex(a)&&!0!==o&&(t++,l(a),s(e))},l=e=>{gameBoard.contents[e]=m().symbol},s=e=>{c(e),e.classList.add("is-flipped")},c=e=>{let a=e.children[1],r=document.createElement("img");r.src=m().imgsrc,a.appendChild(r)},m=()=>t%2==0?r:a,d=()=>{t>=5&&[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]].forEach(e=>{""!==gameBoard.contents[e[0]]&&gameBoard.contents[e[0]]===gameBoard.contents[e[1]]&&gameBoard.contents[e[0]]===gameBoard.contents[e[2]]&&(o=!0,displayController.colorSquares(e),i(`${m().name} won! Play again?`))}),gameBoard.contents.includes("")||(o=!0,i("The game tied. Play again?"))},i=e=>{confirm(e)&&g()},g=()=>{o=!1,t=0,gameBoard.reset(),displayController.clearSquares()};return{loadGame:()=>{e.forEach(e=>{e.onclick=(()=>{n(e),d()})})},restartGame:g,changePlayerNames:()=>{a=playerFactory(1,"X","images/Letter-X.png"),r=playerFactory(2,"O","images/Letter-O.png")}}})();gameFactory.loadGame();