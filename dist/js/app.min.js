"use strict";const gameBoard=(()=>{let e=Array(9).fill("");return{contents:e,isEmptyAtIndex:a=>""===e[a]}})(),displayController={updateSquare:e=>{for(let a of e)document.querySelector(`[data-board-index="${a}"]`).innerHTML=gameBoard.contents[a]},colorSquares:e=>{for(let a of e)document.querySelector(`[data-board-index="${a}"]`).classList.add("winner")}},playerFactory=(e,a)=>({symbol:e,name:a}),gameFactory=(()=>{const e=[...document.querySelectorAll(".square")];let a=playerFactory("X","Player 1"),o=playerFactory("O","Player 2"),r=0,t=!1;const n=e=>{let a=e.getAttribute("data-board-index");console.log(gameBoard.contents),gameBoard.isEmptyAtIndex(a)&&!0!==t&&(r++,l(a),displayController.updateSquare([a]))},l=e=>{c(d(),e)},c=(e,a)=>{gameBoard.contents[a]=e.symbol},d=()=>r%2==0?o:a,s=()=>{if(r>=4&&[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]].forEach(e=>{if(""!==gameBoard.contents[e[0]]&&gameBoard.contents[e[0]]===gameBoard.contents[e[1]]&&gameBoard.contents[e[0]]===gameBoard.contents[e[2]]){t=!0,displayController.colorSquares(e);let a=confirm(`${d().name} won! Play again?`);m(a)}}),9===r){t=!0;let e=confirm("The game tied. Play again?");m(e)}},m=e=>{!1!==e&&y()},y=()=>{t=!1,r=0;for(let e=0;e<gameBoard.contents.length;e++)gameBoard.contents[e]="";displayController.updateSquare(Array(9).keys()),i()},i=()=>{e.forEach(e=>{e.classList.remove("winner")})};return{loadSquares:()=>{e.forEach(e=>{e.onclick=(()=>{n(e),s()})})}}})();gameFactory.loadSquares();