"use strict";const gameBoard=(()=>{let e=Array(9).fill("");return{contents:e,isEmptyAtIndex:a=>!Boolean(e[a]),reset:()=>{for(let a=0;a<e.length;a++)e[a]=""}}})(),displayController={updateSquare:e=>{for(let a of e)document.querySelector(`[data-board-index="${a}"]`).innerHTML=gameBoard.contents[a]},colorSquares:e=>{for(let a of e)document.querySelector(`[data-board-index="${a}"]`).children[1].classList.add("winner")}},playerFactory=(e,a,r)=>({symbol:e,name:a,imgsrc:r}),gameFactory=(()=>{const e=[...document.querySelectorAll(".square")];let a=playerFactory("X","Player 1","images/Letter-X.png"),r=playerFactory("O","Player 2","images/Letter-O.png"),t=0,o=!1;const n=e=>{let a=e.getAttribute("data-board-index");gameBoard.isEmptyAtIndex(a)&&!0!==o&&(t++,l(a),s(e))},l=e=>{gameBoard.contents[e]=d().symbol},s=e=>{c(e),e.classList.add("is-flipped")},c=e=>{let a=e.children[1],r=document.createElement("img");r.src=d().imgsrc,a.appendChild(r)},d=()=>t%2==0?r:a,i=()=>{if(t>=5&&[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]].forEach(e=>{if(""!==gameBoard.contents[e[0]]&&gameBoard.contents[e[0]]===gameBoard.contents[e[1]]&&gameBoard.contents[e[0]]===gameBoard.contents[e[2]]){o=!0,displayController.colorSquares(e);let a=confirm(`${d().name} won! Play again?`);m(a)}}),!gameBoard.contents.includes("")){o=!0;let e=confirm("The game tied. Play again?");m(e)}},m=e=>{e&&g()},g=()=>{o=!1,t=0,gameBoard.reset(),displayController.updateSquare(Array(9).keys()),y()},y=()=>{e.forEach(e=>{e.classList.remove("winner")})};return{loadSquares:()=>{e.forEach(e=>{e.onclick=(()=>{n(e),i()})})}}})();gameFactory.loadSquares();