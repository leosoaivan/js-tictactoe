"use strict";const gameBoard=(()=>{let e=Array(9).fill("");return{contents:e,isEmptyAtIndex:r=>!Boolean(e[r]),reset:()=>{for(let r=0;r<e.length;r++)e[r]=""}}})(),displayController=(()=>{const e=e=>{e.children[1].innerHTML=""},r=e=>{e.children[1].classList.remove("winner"),e.classList.remove("is-flipped")};return{colorSquares:e=>{for(let r of e)document.querySelector(`[data-board-index="${r}"]`).children[1].classList.add("winner")},clearSquares:()=>{let a=document.querySelectorAll(".square");for(let t of a)e(t),r(t)}}})(),playerFactory=(e,r,a)=>({symbol:e,name:r,imgsrc:a}),gameFactory=(()=>{const e=[...document.querySelectorAll(".square")];let r=playerFactory("X","Player 1","images/Letter-X.png"),a=playerFactory("O","Player 2","images/Letter-O.png"),t=0,o=!1;const n=e=>{let r=e.getAttribute("data-board-index");gameBoard.isEmptyAtIndex(r)&&!0!==o&&(t++,l(r),s(e))},l=e=>{gameBoard.contents[e]=d().symbol},s=e=>{c(e),e.classList.add("is-flipped")},c=e=>{let r=e.children[1],a=document.createElement("img");a.src=d().imgsrc,r.appendChild(a)},d=()=>t%2==0?a:r,i=()=>{t>=5&&[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]].forEach(e=>{""!==gameBoard.contents[e[0]]&&gameBoard.contents[e[0]]===gameBoard.contents[e[1]]&&gameBoard.contents[e[0]]===gameBoard.contents[e[2]]&&(o=!0,displayController.colorSquares(e),m(`${d().name} won! Play again?`))}),gameBoard.contents.includes("")||(o=!0,m("The game tied. Play again?"))},m=e=>{confirm(e)&&g()},g=()=>{o=!1,t=0,gameBoard.reset(),displayController.clearSquares()};return{loadSquares:()=>{e.forEach(e=>{e.onclick=(()=>{n(e),i()})})}}})();gameFactory.loadSquares();