"use strict";const gameBoard=(()=>{let e=Array(9).fill("");const t=t=>{return!Boolean(e[t])};const r=()=>{for(let t=0;t<e.length;t++){e[t]=""}};return{contents:e,isEmptyAtIndex:t,reset:r}})();const displayController=(()=>{const e=()=>{let e=document.querySelectorAll(".square");for(let t of e){r(t);a(t)}};const t=e=>{for(let t of e){let e=document.querySelector(`[data-board-index="${t}"]`);e.children[1].classList.add("winner")}};const r=e=>{e.children[1].innerHTML=""};const a=e=>{e.children[1].classList.remove("winner");e.classList.remove("is-flipped")};return{colorSquares:t,clearSquares:e}})();const playerFactory=(e,t,r)=>{name=prompt(`You are Player ${e}. What is your name?`,`Player ${e}`);return{symbol:t,name:name,imgsrc:r}};const gameFactory=(()=>{const e=[...document.querySelectorAll(".square")];let t=playerFactory(1,"X","images/Letter-X.png");let r=playerFactory(2,"O","images/Letter-O.png");let a=0;let n=false;const o=()=>{e.forEach(e=>{e.onclick=(()=>{s(e);d()})})};const s=e=>{let t=e.getAttribute("data-board-index");if(!gameBoard.isEmptyAtIndex(t)||n===true){return}else{a++;l(t);c(e)}};const l=e=>{gameBoard.contents[e]=m().symbol};const c=e=>{i(e);e.classList.add("is-flipped")};const i=e=>{let t=e.children[1];let r=document.createElement("img");r.src=m().imgsrc;t.appendChild(r)};const m=()=>{return a%2===0?r:t};const d=()=>{const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];if(a>=5){e.forEach(e=>{if(gameBoard.contents[e[0]]===""){return}else if(gameBoard.contents[e[0]]===gameBoard.contents[e[1]]&&gameBoard.contents[e[0]]===gameBoard.contents[e[2]]){n=true;displayController.colorSquares(e);u(`${m().name} won! Play again?`)}})}if(!gameBoard.contents.includes("")){n=true;u("The game tied. Play again?")}};const u=e=>{if(confirm(e)){g()}else{return}};const g=()=>{n=false;a=0;gameBoard.reset();displayController.clearSquares()};const y=()=>{t=playerFactory(1,"X","images/Letter-X.png");r=playerFactory(2,"O","images/Letter-O.png")};return{loadGame:o,restartGame:g,changePlayerNames:y}})();gameFactory.loadGame();