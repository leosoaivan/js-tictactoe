"use strict";const gameBoard=(()=>{let e=Array(9).fill("");const t=t=>{return!Boolean(e[t])};const r=()=>{for(let t=0;t<e.length;t++){e[t]=""}};return{contents:e,isEmptyAtIndex:t,reset:r}})();const displayController=(()=>{const e=e=>{for(let t of e){let e=document.querySelector(`[data-board-index="${t}"]`);e.innerHTML=gameBoard.contents[t]}};const t=e=>{for(let t of e){let e=document.querySelector(`[data-board-index="${t}"]`);e.children[1].classList.add("winner")}};return{updateSquare:e,colorSquares:t}})();const playerFactory=(e,t,r)=>{return{symbol:e,name:t,imgsrc:r}};const gameFactory=(()=>{const e=[...document.querySelectorAll(".square")];let t=playerFactory("X","Player 1","images/Letter-X.png");let r=playerFactory("O","Player 2","images/Letter-O.png");let o=0;let a=false;const n=()=>{e.forEach(e=>{e.onclick=(()=>{s(e);m()})})};const s=e=>{let t=e.getAttribute("data-board-index");if(!gameBoard.isEmptyAtIndex(t)||a===true){return}else{o++;c(t);l(e)}};const c=e=>{gameBoard.contents[e]=i().symbol};const l=e=>{d(e);e.classList.add("is-flipped")};const d=e=>{let t=e.children[1];let r=document.createElement("img");r.src=i().imgsrc;t.appendChild(r)};const i=()=>{return o%2===0?r:t};const m=()=>{const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];if(o>=5){e.forEach(e=>{if(gameBoard.contents[e[0]]===""){return}else if(gameBoard.contents[e[0]]===gameBoard.contents[e[1]]&&gameBoard.contents[e[0]]===gameBoard.contents[e[2]]){a=true;displayController.colorSquares(e);let t=confirm(`${i().name} won! Play again?`);u(t)}})}if(!gameBoard.contents.includes("")){a=true;let e=confirm(`The game tied. Play again?`);u(e)}};const u=e=>{if(e){g()}else{return}};const g=()=>{a=false;o=0;gameBoard.reset();displayController.updateSquare(Array(9).keys());y()};const y=()=>{e.forEach(e=>{e.classList.remove("winner")})};return{loadSquares:n}})();gameFactory.loadSquares();